{"name":"modeify","description":"Web TDM","main":"lib/server.js","engines":{"node":"6","npm":"3"},"repository":"https://github.com/conveyal/modeify","license":"MIT","homepage":"https://github.com/conveyal/modeify","dependencies":{"@conveyal/lonlat":"^1.3.0","analytics-node":"^2.4.0","async":"^2.2.0","auth0-js":"^8.8.0","auth0-lock":"^10.18.0","aws-sdk":"^2.34.0","batch":"^0.6.0","body-parser":"^1.17.1","bootstrap":"^3.3.7","cli-table":"^0.3.1","commander":"^2.9.0","commuter-connections":"^1.0.0","component":"^1.1.0","component-classes":"^1.2.6","component-clone":"^0.2.3","component-closest":"^1.0.1","component-collection":"0.0.4","component-cookie":"^1.1.3","component-each":"^0.2.6","component-emitter":"^1.2.1","component-event":"^0.2.0","component-file":"^0.1.1","component-file-picker":"^0.2.1","component-ie":"^1.0.0","component-indexof":"0.0.3","component-model":"^0.3.2","component-props":"^1.1.1","component-query":"0.0.3","component-querystring":"^2.0.0","component-raf":"^1.2.0","component-tap":"^1.0.1","component-type":"^1.2.1","component-value":"^1.1.0","compression":"^1.6.2","concat-stream":"^1.6.0","crossfilter2":"^1.4.0-alpha.6","css-emitter-component":"^0.1.1","csv-parse":"1.2.0","d3":"^3.5.17","dc":"^2.1.3","debounce":"^1.0.0","debug":"^2.6.3","domify":"^1.4.0","each-component":"^0.1.0","errorhandler":"^1.5.0","es5-shim":"^4.5.9","es6-shim":"^0.35.3","express":"^4.15.2","express-jwt":"^5.3.0","font-awesome":"^4.7.0","format-parser":"0.0.2","geo-tz":"^3.3.0","haversine":"^1.0.2","hogan.js":"^3.0.2","html5-history-api":"^4.2.8","intro.js":"^2.5.0","is":"^3.2.1","isomorphic-fetch":"^2.2.1","jade":"^1.11.0","juice":"^4.0.2","jwt-decode":"^2.2.0","leaflet":"1.0.3","leaflet-transitivelayer":"^0.2.0","leaflet.markercluster":"^1.0.4","mapbox":"^1.0.0-beta6","mapbox.js":"^3.0.1","mastarm":"^3.7.1","mime":"^1.3.4","minimist":"^1.2.0","mkdirp":"^0.5.1","mocha":"^3.2.0","moment":"^2.18.1","moment-timezone":"^0.5.11","mongoose":"^4.9.2","mongoose-paginate":"^5.0.3","monquery":"^0.2.0","morgan":"^1.8.1","mouseenter":"^1.0.0","mouseleave":"^1.0.0","myth":"^1.5.0","names":"1.0.0","nock":"^9.0.11","node-logentries":"~0.1.4","node-uuid":"^1.4.8","nodemon":"^1.11.0","normalize.css":"^6.0.0","on-finished":"^2.3.0","once-component":"0.0.1","otp-profile-score":"^0.6.3","otp-profile-to-transitive":"0.1.1","page":"^1.7.1","pikaday":"^1.5.1","polyline":"^0.2.0","priorityqueuejs":"^1.0.0","prompt":"^1.0.0","remarkable":"^1.7.1","ridematcher":"^0.2.0","scrollbar-size":"^1.0.4","semantic-release":"^6.3.2","serve-static":"^1.12.1","should":"^11.2.1","sparkpost":"^2.1.2","spin.js":"^2.3.2","sqwish":"~0.2.2","superagent":"^3.5.2","superagent-prefix":"0.0.2","supertest":"^3.0.0","throttleit":"^1.0.0","to-capital-case":"^1.0.0","to-sentence-case":"^1.0.0","to-slug-case":"~1.0.0","transitive-js":"^0.9.2","ua-parser-js":"^0.7.12","uuid":"^3.1.0","winston":"^2.3.1","yamljs":"^0.2.8","yields-store":"^1.0.2"},"scripts":{"build":"mastarm build","cover":"mastarm test --coverage --coverage-paths \"lib/**/*.js client/**/*.js\"","lint":"mastarm lint \"client/**/*.js\" \"lib/**/*.js\"","prestart":"yarn","pretest":"yarn","start":"nodemon --watch lib lib/server.js","test":"yarn run lint && mastarm test","semantic-release":"semantic-release pre && npm publish && semantic-release post"},"standard":{"parser":"babel-eslint"},"mastarm lint":{"ignore":["/client/components/*"]},"version":"1.1.5","gitHead":"fcaf82196de480a758700d12d6214ec057b5c6f1","versions":[{"number":"1.0.0","date":"2017-03-27T15:01:40.546Z"},{"number":"1.1.0","date":"2017-03-31T12:34:40.504Z"},{"number":"1.1.1","date":"2017-03-31T13:22:11.521Z"},{"number":"1.1.2","date":"2017-04-12T16:19:26.142Z"},{"number":"1.1.3","date":"2017-06-08T19:02:33.103Z"},{"number":"1.1.4","date":"2017-08-15T21:12:17.803Z"},{"number":"1.1.5","date":"2017-08-15T21:31:24.655Z"}],"readme":"# Modeify\n\n[![Build status][travis-image]][travis-url]\n[![Test coverage][coveralls-image]][coveralls-url]\n[![Code Climate][code-climate-image]][code-climate-url]\n[![Dependency Status][david-image]][david-url]\n\n[travis-image]: https://img.shields.io/travis/conveyal/modeify.svg?style=flat-square\n[travis-url]: https://travis-ci.org/conveyal/modeify\n[coveralls-image]: https://img.shields.io/coveralls/conveyal/modeify.svg?style=flat-square\n[coveralls-url]: https://coveralls.io/r/conveyal/modeify?branch=master\n[code-climate-image]: http://img.shields.io/codeclimate/github/conveyal/modeify.svg?style=flat-square\n[code-climate-url]: https://codeclimate.com/github/conveyal/modeify\n[david-image]: http://img.shields.io/david/conveyal/modeify.svg?style=flat-square\n[david-url]: https://david-dm.org/conveyal/modeify\n\n[Modeify](http://modeify.co) is an open-source platform for multimodal commuter engagement. Utilizing the latest advances in open transportation technology, Modeify uses personalized outreach to promote commuter behavior change and improve outcomes for travelers, employers, and transportation demand management (TDM) providers.\n\nDevelopment of Modeify is supported by the [Mobility Lab](http://mobilitylab.org/) [Transit Tech Initiative](http://mobilitylab.org/tech/transit-tech-initiative/).\n\n## Development quick start\n\nClone to your local directory to begin.\n\n```bash\n$ git clone git@github.com:conveyal/modeify.git\n$ cd modeify\n```\n\n### Requirements\n\n* [Node.js](https://nodejs.org/) version `6.x.x`\n* [Yarn](https://yarnpkg.com/en/)\n* [R5](https://github.com/conveyal/r5) url endpoint\n* [MongoDB](https://www.mongodb.org/)\n* [Mapbox](https://mapbox.com) access token and a map id\n* [Mapzen Search](https://mapzen.com/projects/search/) api key\n* [Auth0](https://auth0.com)\n\n### Configuration\n\nAn example configuration can be found in `configurations/default`. Copy that directory and edit the `settings.yml` and `env.yml` files. Add your\n\n1. `MONGODB_URL` to `env.yml`.\n2. Mapbox `access_token` and `map_id` to `settings.yml`.\n3. Mapzen Search `api_key` to `settings.yml`.\n4. R5 url endpoint to `settings.yml`.\n5. Auth0 `AUTH0_CLIENT_ID`, `AUTH0_DOMAIN`, `AUTH0_NON_INTERACTIVE_CLIENT_ID`, `AUTH0_NON_INTERACTIVE_CLIENT_SECRET`, and `AUTH0_SIGNING_CERTIFICATE` to `env.yml`.\n6. Auth0 logo and primary color in `lock > theme` in `settings.yml`.\n\nIf you have configuration specific images run `./bin/set-deployment ../path/to/your/configuration/directory` to use them.\n\n### Running\n\nIf Modeify is configured correctly (above) then you will be able to run with `npm start`. This will\n\n1. Install all of the dependencies.\n2. Run the node server with automatic restarts using [nodemon](http://nodemon.io/). It watches for changes in the `/lib` directory.\n3. Build the `client/planner-app` and `client/manager-app` and rebuilds on changes.\n\nOnce it starts, you will be able to find the planner at [http://localhost:5000](http://localhost:5000) and the manager at [http://localhost:5000/manager](http://localhost:5000/manager).\n\nTo point it at a different configuration directory run:\n\n```bash\n$ npm start -- ../path/to/configuration/directory\n```\n\n## Deployment\n\nThis repository is setup to deploy automatically to Heroku. All commits to the dev branch will be deployed to staging and all commits to master will be deployed to production. Pull requests will create review apps that run on Heroku Hobby Dynos. The review apps will build their client side files locally while the staging and production apps retrieve their assets from AWS and they need to be deployed manually.\n\nHeroku will run the node server with\n\n```bash\n$ node lib/server.js\n```\n\n### Heroku Environment Variables\n\nAll variables in `env.yml` must be set manually as Heroku environment variables. They can be set via the command line with:\n\n```bash\n$ heroku config:set VARIABLE_NAME=value --app heroku-app-name\n```\n\nThe `settings.yml` is retrieved from Heroku apps via the `MODEIFY_CONFIG` environment variable. To set that value you can run the `bin/push-settings-to-heroku` script:\n\n```bash\n$ ./bin/push-settings-to-heroku ../path/to/configuration/settings.yml heroku-app-name\n```\n\n### AWS Assets Deployment\n\nDeployment is done with `mastarm`. See [mastarm#deploy](https://github.com/conveyal/mastarm#deploy) for more info on configuration.\n\n```bash\n$ mastarm deploy --minify --env production --config ../configurations/modeify\n```\n","created":"2017-03-27T15:01:40.546Z","modified":"2017-08-15T21:31:24.655Z","lastPublisher":{"name":"trevorgerhardt","email":"trevorgerhardt@gmail.com"},"owners":[{"name":"trevorgerhardt","email":"trevorgerhardt@gmail.com"}],"other":{"_attachments":{},"_from":".","_id":"modeify","_nodeVersion":"6.11.2","_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/modeify-1.1.5.tgz_1502832682645_0.4424563755746931"},"_npmUser":{"name":"trevorgerhardt","email":"trevorgerhardt@gmail.com"},"_npmVersion":"3.10.10","_rev":"7-05628d290a7e599e43f2a3364b6d22b4","_shasum":"0b167d98ec0490ca15544cb5e7b80daa5a8c5a66","author":{"name":"Conveyal"},"bugs":{"url":"https://github.com/conveyal/modeify/issues"},"directories":{},"dist-tags":{"latest":"1.1.5"},"dist":{"shasum":"0b167d98ec0490ca15544cb5e7b80daa5a8c5a66","tarball":"https://registry.npmjs.org/modeify/-/modeify-1.1.5.tgz"},"maintainers":[{"name":"trevorgerhardt","email":"trevorgerhardt@gmail.com"}],"readmeFilename":"README.md","time":{"modified":"2017-08-15T21:31:24.655Z","created":"2017-03-27T15:01:40.546Z","1.0.0":"2017-03-27T15:01:40.546Z","1.1.0":"2017-03-31T12:34:40.504Z","1.1.1":"2017-03-31T13:22:11.521Z","1.1.2":"2017-04-12T16:19:26.142Z","1.1.3":"2017-06-08T19:02:33.103Z","1.1.4":"2017-08-15T21:12:17.803Z","1.1.5":"2017-08-15T21:31:24.655Z"}}}